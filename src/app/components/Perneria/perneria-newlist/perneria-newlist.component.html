<article class="table-header" style="padding-top: 15px;">
  <div>
    <h4 class="" style="padding-left: 10px; padding-top: 10px; color:darkgreen">Perner√≠a {{this.titulo}} </h4>
  </div>
  <div>
   <!--  <button class="button-remove-rows" mat-button (click)="removeSelectedRows()">Remove Rows </button>
    <button class="button-add-row" mat-button (click)="addRow()">Add Row</button> -->
  </div>
</article>
<table mat-table [dataSource]="dataSource">
  <ng-container [matColumnDef]="col.key" *ngFor="let col of columnsSchema">
    <th class="grid-diseno-header" mat-header-cell *matHeaderCellDef [ngSwitch]="col.key">

<!--       <div *ngSwitchCase="'isSelected'">
        <mat-checkbox
          (change)="selectAll($event)"
            [checked]="isAllSelected()"
            [indeterminate]="!isAllSelected() && isAnySelected()"
            >
        </mat-checkbox>
      </div> -->

      <span *ngSwitchDefault>{{ col.label }}</span>
    </th>

    <td mat-cell *matCellDef="let element" class="grid-item-fila">

      <div [ngSwitch]="col.type" *ngIf="!element.isEdit">
<!--         <ng-container *ngSwitchCase="'isSelected'">
          <mat-checkbox
            (change)="element.isSelected = $event.checked"
            [checked]="element.isSelected"
          ></mat-checkbox>
        </ng-container> -->

        <div class="" *ngSwitchCase="'isEdit'" style="width: 80px;">
          <button mat-button mat-icon-button
            style="padding-left: 15px; color:green ; padding-top: 5px; border-style: hidden;"
            #tooltip="matTooltip"
            matTooltip="Editar"
            matTooltipPosition="right"
            (click)="editDatos(element.ID_PERNO, element)"
            [disabled]="">
            <mat-icon aria-label="visibility" class="mat-elevation-z4" >edit_note</mat-icon>
          </button>
          <!-- <button mat-button class="button-remove" (click)="removeRow(element.ID_PERNO)"> Delete </button> -->
        </div>

        <span *ngSwitchCase="'date'">{{ element[col.key] | date: "dd-MM-YYYY" }}</span>

        <div *ngSwitchCase="'textCumpli'" style="width: 140px; ">
          <mat-progress-bar mode="determinate" value={{element.PORCENTAJE}}
            matBadge={{element.PORCENTAJE}}%
            matBadgePosition="after"
            matBadgeOverlap="true"
            style="font-size: small; width: 110px; color: aqua; "
            ></mat-progress-bar>
        </div>

        <!-- <div *ngSwitchCase="'isEdit'" style="width: 102px; "></div> -->

        <span *ngSwitchDefault> {{ element[col.key] }} </span>
      </div>

      <div [ngSwitch]="col.type" *ngIf="element.isEdit">

        <!-- <div *ngSwitchCase="'isSelected'" ></div> -->

        <div class="btn-edit" *ngSwitchCase="'isEdit'" style="width: 80px;">

          <button mat-button mat-icon-button
              style="padding-left: 15px; color:green ; padding-top: 15px; border-style: hidden;"
              #tooltip="matTooltip"
              matTooltip="Grabar"
              matTooltipPosition="right"
              (click)="UpdateRow(element.ID_PERNO, element)">
              <mat-icon aria-label="visibility" class="mat-elevation-z4" >add_task</mat-icon>
          </button>
          <!-- <button mat-button (click)="editRow(element)" [disabled]="disableSubmit(element.ID_PERNO)">Ok</button> -->

          <button mat-button mat-icon-button
              style="padding-left: 15px; color:brown ; padding-top: 15px; border-style: hidden;"
              #tooltip="matTooltip"
              matTooltip="Cancelar"
              matTooltipPosition="right"
              (click)="canceledit($event, element.ID_PERNO, col.key, element)">
              <mat-icon aria-label="visibility" class="mat-elevation-z4" >undo</mat-icon>
          </button>
          <!-- <button mat-button (click)="canceledit(element)" >Cancel</button>  -->

        </div>

        <div  *ngSwitchCase="'date'"  style="width: 120px; " >
          <input class="" matInput [matDatepicker]="picker" [(ngModel)]="element[col.key]"  style="font-size: small; width: 80px; padding-top: 1px; "/>
          <mat-datepicker-toggle matSuffix [for]="picker" ></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </div>

        <div class="form-input" *ngSwitchCase="'select'"  style="font-size:small; " >
          <select
            (change)="selectHandler($event, element.ID_PERNO, col.key, col.seloption)" >
            @for (op of col.seloption; track op) {
                <option [value]="op.value">{{op.viewValue}}</option>
            }
          </select>
        </div>

        <div class="form-input" *ngSwitchCase="'textCumpli'" >
          <mat-progress-bar mode="determinate" value={{element.PORCENTAJE}}
            matBadge={{element.PORCENTAJE}}%
            matBadgePosition="after"
            matBadgeOverlap="true"
            style="width: 105px; align-content: end; "
            ></mat-progress-bar>
        </div>

        <div class="" *ngSwitchCase="'textItem'" style="font-size: small; width: 120px; ">
          <input
            matInput
            [required]="col.required"
            [type]="col.type"
            [disabled]="col.disabled"
            [(ngModel)]="element[col.key]"
            (change)="inputHandler($event, element.ID_PERNO, col.key)" />
        </div>

        <div class="" *ngSwitchCase="'textCant'">
          <input
            style="font-size: small; width: 80px; text-align: right; "
            matInput
            [required]="col.required"
            [type]="col.type"
            [disabled]="col.disabled"
            [(ngModel)]="element[col.key]"
            (change)="inputHandler($event, element.ID_PERNO, col.key)" />
        </div>

        <div class="" *ngSwitchCase="'textEditCant'" >
          <input
            style="font-size: small; width: 80px; text-align: right;  background-color: aqua; "
            matInput
            [required]="col.required"
            [type]="col.type"
            [disabled]="col.disabled"
            [(ngModel)]="element[col.key]"
            (change)="Func_Percent(element.ID_PERNO, element, element.CANTIDAD_TERRENO)" />
        </div>

        <div class="" *ngSwitchDefault >
          <input style="width: 550px; font-size: small; background-color: aqua; padding-left: 5px;"
            matInput
            [required]="col.required"
            [pattern]="col.pattern"
            [type]="col.type"
            [readonly]="col.readonly"
            [disabled]="col.disabled"
            [(ngModel)]="element[col.key]"
            (change)="inputHandler($event, element.ID_PERNO, col.key)" />
        </div>
      </div>
    </td>
  </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns; " class="table-row">
</table>

